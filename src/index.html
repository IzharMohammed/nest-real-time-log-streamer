<!doctype html>
<html>
  <body>
    <h1>Live Logs</h1>
    <ul id="logs"></ul>
    <script type="text/javascript">
      const eventSource = new EventSource('http://localhost:3001/logs/sse');
      //   eventSource.onmessage = ({ data }) => {
      //     const parsed = JSON.parse(data);

      //     const message = document.createElement('li');
      //     message.innerText = `${parsed.time} - ${parsed.message}`;

      //     document.body.appendChild(message);
      //   };

      eventSource.onmessage = function (event) {
        const log = JSON.parse(event.data);
        const li = document.createElement('li');
        li.textContent = log.message;
        document.getElementById('logs').appendChild(li);
      };

      eventSource.onerror = (err) => {
        console.error('EventSource failed:', err);
      };
    </script>
  </body>
</html>
